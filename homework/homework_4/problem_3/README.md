### 3. Gender assortativity

A network is said to be assortative if nodes tend to be connected to "similiar" nodes, where similarity is based on some property of the node (e.g., age, gender, degree, etc.). In this problem you'll look at gender assortativity in the social networks of several universities as collected in the Facebook100 dataset studied [in this paper](https://www.sciencedirect.com/science/article/pii/S0378437111009186). (A link to this dataset, which is not currently public, will be provided on Piazza.)

Each of these networks contains (undirected) links between people who were connected as friends on Facebook in a 2005 snapshot of the network along with (anonymized) demographic information about each person. Here we will be interested in gender, which is coded as 1 = male, 2 = female, and 0 = unknown.

a) Loop over each network in this dataset and read in information about the nodes and edges. Keep in mind that the networks are undirected and each edge is listed only once in the edgelist files (e.g., edge A-B does not appear as B-A). For each node in the network, record its gender, count the total number of neighbors it has, and count how many of these neighbors are identified as males, females, or unknowns. Also compute the fraction of each node's neighbors that are labeled as female, rounded to the nearest 10 percentage points, which we'll call p<sub>f</sub>.

b) Make a plot that shows the probability that a node is female versus the fraction of female neighbors it has, for each school in the dataset. Do this by binning the nodes in each school according to p<sub>f</sub> and computing what fraction of nodes in each bin are labeled as female. This plot should contain one panel for each school, with the x-axis showing p<sub>f</sub> binned in increments of 10 percentage points and the y axis showing the percent of nodes in each bin that are actually labeled as female. Show points sized by the number of nodes in each bin, add a dashed diagonal line to the plots, and set the axis limits from 0 to 100% for both axes. Comment on any interesting patterns or differences between schools.

c) Now use the gender breakdown of a node's neighbors to try to predict the node's gender with a simple majority vote: predict that each node's gender is the most commonly occuring gender among its neighbors, breaking ties randomly. Compare these predictions to each node's actual gender and compute the accuracy of such a classifier for each school.

d) Make a plot which shows the name of each school on the y-axis and the accuracy of the classifier on the x-axis, with a dashed vertical line at accuracy = 0.50 and schools sorted by decreasing classifier accuracy. Include standard errors on the accuracies. Comment on the schools for which your classifier has comparatively low / high accuracy.

e) How would you expect the results of parts b) and d) to differ for a network that encodes dating relationships where the majority of individuals are heterosexual instead of the friendship networks you have looked at here?

*Do not* use igraph or any network packages to complete this problem. Instead create one dataframe for the nodes of each network and one dataframe for the edges of that network, and do all calculations by manipulating these dataframes.